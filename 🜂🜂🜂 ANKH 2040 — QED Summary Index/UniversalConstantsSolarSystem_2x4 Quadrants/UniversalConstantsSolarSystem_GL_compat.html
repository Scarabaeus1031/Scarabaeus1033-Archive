<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Universal Constants Solar System · A/B/C Prime Layers · n‑Bands (compat)</title>
<style>
  html, body { margin:0; height:100%; background:#0b1020; color:#e6eefc; font-family:system-ui, -apple-system, Segoe UI, Roboto, Ubuntu, Cantarell, "Helvetica Neue", Arial, "Noto Sans", "Apple Color Emoji", "Segoe UI Emoji"; }
  #app { position:fixed; inset:0; }
  #hud {
    position: fixed; top: 12px; left: 12px; right: 12px; display:flex; gap:12px; flex-wrap:wrap;
    background: rgba(10,16,30,.5); border:1px solid rgba(255,255,255,.08); border-radius:12px; padding:12px 14px; backdrop-filter: blur(6px);
  }
  #hud .block { display:flex; gap:10px; align-items:center; flex-wrap:wrap; }
  #hud .title { font-weight:700; letter-spacing:.02em; opacity:.9; margin-right:8px; }
  .chip { padding:6px 10px; border-radius:10px; border:1px solid rgba(255,255,255,.12); background:rgba(255,255,255,.05); }
  .eq { font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace; font-size:12px; opacity:.9; }
  a { color:#9bd3ff; text-decoration:none; }
  .legend { display:flex; gap:8px; align-items:center; }
  .sw { width:12px; height:12px; border-radius:50%; display:inline-block; margin-right:6px; border:1px solid rgba(255,255,255,.25); }
  .blue { background:#4aa3ff; }
  .red  { background:#ff6b6b; }
  .green{ background:#69f0ae; }
  .gold { background:#ffcf5a; }
  .mag  { background:#b388ff; }
</style>
</head>
<body>
<div id="app"></div>
<div id="hud">
  <div class="block">
    <span class="title">Layers:</span>
    <label class="chip"><input type="checkbox" id="chkA" checked> <span class="legend"><span class="sw blue"></span>A‑primes (Asteroids)</span></label>
    <label class="chip"><input type="checkbox" id="chkB" checked> <span class="legend"><span class="sw red"></span>B‑primes (Planets/Satellites)</span></label>
    <label class="chip"><input type="checkbox" id="chkC" checked> <span class="legend"><span class="sw green"></span>C‑primes (Comets)</span></label>
    <label class="chip"><input type="checkbox" id="chkNB" checked> <span class="legend"><span class="sw gold"></span>η n‑Bands (0.429/0.456/0.487)</span></label>
    <label class="chip"><input type="checkbox" id="chkRails" checked> <span class="legend"><span class="sw mag"></span>Rails (√2/√5/√17)</span></label>
    <label class="chip"><input type="checkbox" id="chkOort" checked> Oort shell</label>
  </div>
  <div class="block">
    <span class="title">Counts:</span>
    <span class="chip">Satellites total (symbolic): <span id="lblMoons">1022</span></span>
    <span class="chip">Seed: <span id="lblSeed">1087</span></span>
  </div>
  <div class="block" style="flex:1 1 100%;">
    <span class="title">Equations (map → visuals):</span>
    <span class="chip eq">φ³/π² ≈ 0.429 (Zeta‑Line)</span>
    <span class="chip eq">η = {0.429, 0.456, 0.487}</span>
    <span class="chip eq">Rails = {√2, √5, √17}</span>
    <span class="chip eq">204² Gate: 23³+24³+25³ = 41,616</span>
    <span class="chip eq">√432 ≈ 20.785</span>
  </div>
</div>

<!-- Non‑module (UMD) scripts so it works from file:// -->
<script src="https://unpkg.com/three@0.160.0/build/three.min.js"></script>
<script src="https://unpkg.com/three@0.160.0/examples/js/controls/OrbitControls.js"></script>

<script>
// ------------ Scene setup ------------
const app = document.getElementById('app');
const renderer = new THREE.WebGLRenderer({ antialias:true, alpha:true });
renderer.setPixelRatio(window.devicePixelRatio || 1);
renderer.setSize(window.innerWidth, window.innerHeight);
app.appendChild(renderer.domElement);

const scene = new THREE.Scene();
const camera = new THREE.PerspectiveCamera(55, window.innerWidth/window.innerHeight, 0.1, 1e6);
camera.position.set(0, 120, 360);

const controls = new THREE.OrbitControls(camera, renderer.domElement);
controls.enableDamping = true;
controls.dampingFactor = 0.06;

window.addEventListener('resize', ()=>{
  camera.aspect = window.innerWidth/window.innerHeight;
  camera.updateProjectionMatrix();
  renderer.setSize(window.innerWidth, window.innerHeight);
});

// Lighting
const hemi = new THREE.HemisphereLight(0x99ccff, 0x001122, 0.7);
scene.add(hemi);
const dir = new THREE.DirectionalLight(0xffffff, 0.6);
dir.position.set(100,200,80);
scene.add(dir);

// ------------ Parameters (symbolic) ------------
const TOTAL_SATELLITES = 1022;
document.getElementById('lblMoons').textContent = TOTAL_SATELLITES;
const RNG_SEED = 1087;
document.getElementById('lblSeed').textContent = RNG_SEED;

// Distribution (symbolic)
const dist = { Jupiter:0.39, Saturn:0.30, Uranus:0.15, Neptune:0.12, Inner:0.04 };

const AU = 60;
const planets = [
  { name:'Mercury', x: 0.39*AU, r: 2.0, color:0x9e9e9e },
  { name:'Venus',   x: 0.72*AU, r: 3.2, color:0xffc27a },
  { name:'Earth',   x: 1.00*AU, r: 3.3, color:0x7ab8ff },
  { name:'Mars',    x: 1.52*AU, r: 2.5, color:0xff7b6e },
  { name:'Jupiter', x: 5.20*AU, r:11.0, color:0xe3c788 },
  { name:'Saturn',  x: 9.58*AU, r: 9.2, color:0xf6e2a2 },
  { name:'Uranus',  x:19.20*AU, r: 6.5, color:0xa0e5e5 },
  { name:'Neptune', x:30.05*AU, r: 6.3, color:0x5bb2ff }
];

function seededRandom(seed) {
  return function() {
    let t = seed += 0x6D2B79F5;
    t = Math.imul(t ^ t >>> 15, t | 1);
    t ^= t + Math.imul(t ^ t >>> 7, t | 61);
    return ((t ^ t >>> 14) >>> 0) / 4294967296;
  }
}
const rand = seededRandom(RNG_SEED);

function ring(radius, width, color, opacity){
  const g = new THREE.RingGeometry(radius-width, radius+width, 128);
  const m = new THREE.MeshBasicMaterial({ color, opacity, transparent:true, side:THREE.DoubleSide });
  const mesh = new THREE.Mesh(g, m);
  mesh.rotation.x = -Math.PI/2;
  return mesh;
}
function disk(radius, color, opacity){
  const g = new THREE.CircleGeometry(radius, 128);
  const m = new THREE.MeshBasicMaterial({ color, opacity, transparent:true, side:THREE.DoubleSide });
  const mesh = new THREE.Mesh(g, m);
  mesh.rotation.x = -Math.PI/2;
  return mesh;
}
function bandPlane(y, color, label) {
  const g = new THREE.PlaneGeometry(2000, 2000);
  const m = new THREE.MeshBasicMaterial({ color, transparent:true, opacity:0.08, side:THREE.DoubleSide });
  const pl = new THREE.Mesh(g, m); pl.position.y = y; pl.name = label; return pl;
}
function railPlane(x, color, label) {
  const g = new THREE.PlaneGeometry(2000, 2000);
  const m = new THREE.MeshBasicMaterial({ color, transparent:true, opacity:0.05, side:THREE.DoubleSide });
  const pl = new THREE.Mesh(g, m); pl.rotation.y = Math.PI/2; pl.position.x = x; pl.name = label; return pl;
}

// Sun
const sun = new THREE.Mesh(new THREE.SphereGeometry(12, 48, 32), new THREE.MeshBasicMaterial({ color:0xffe18b }));
scene.add(sun);

// Planets + orbits
const planetGroup = new THREE.Group();
planets.forEach(p=>{
  const mesh = new THREE.Mesh(new THREE.SphereGeometry(p.r, 24, 16), new THREE.MeshStandardMaterial({ color:p.color, roughness:.6, metalness:.1 }));
  mesh.position.set(p.x,0,0);
  planetGroup.add(mesh);
  scene.add(ring(p.x, 0.1, 0x88aadd, 0.15));
});
scene.add(planetGroup);

// Belts (A)
const beltGroup = new THREE.Group();
beltGroup.add(ring(2.8*AU, 6, 0x4aa3ff, 0.18));
beltGroup.add(ring(39.5*AU, 8, 0x4aa3ff, 0.10));
scene.add(beltGroup);

// Comets (C)
const cometGroup = new THREE.Group();
const cg = new THREE.SphereGeometry(0.6, 8, 8);
const cm = new THREE.MeshBasicMaterial({ color:0x69f0ae, transparent:true, opacity:0.8 });
for (let i=0;i<160;i++){
  const m = new THREE.Mesh(cg, cm);
  const r = (10 + rand()*60) * AU;
  const theta = rand()*Math.PI*2;
  const inc = (rand()*0.7+0.2) * Math.PI/2;
  const x = Math.cos(theta)*r;
  const z = Math.sin(theta)*r * Math.cos(inc);
  const y = Math.sin(inc) * (rand()*60 - 30);
  m.position.set(x,y,z);
  cometGroup.add(m);
}
scene.add(cometGroup);

// Moons (B)
const moonGroup = new THREE.Group();
const moonMat = new THREE.MeshBasicMaterial({ color:0xff6b6b });
function addMoonCloud(centerX, planetR, count){
  const g = new THREE.SphereGeometry(0.8, 8, 8);
  for (let i=0;i<count;i++){
    const m = new THREE.Mesh(g, moonMat);
    const base = planetR + 4 + rand()*22;
    const theta = rand()*Math.PI*2;
    const inc = (rand()*0.6 - 0.3);
    const x = centerX + Math.cos(theta)*base;
    const y = Math.sin(inc)*base*0.35;
    const z = Math.sin(theta)*base*Math.cos(inc);
    m.position.set(x,y,z);
    moonGroup.add(m);
  }
}
const cJ = Math.round(TOTAL_SATELLITES*dist.Jupiter);
const cS = Math.round(TOTAL_SATELLITES*dist.Saturn);
const cU = Math.round(TOTAL_SATELLITES*dist.Uranus);
const cN = Math.round(TOTAL_SATELLITES*dist.Neptune);
const cI = Math.max(0, TOTAL_SATELLITES - (cJ+cS+cU+cN));

addMoonCloud(planets[4].x, planets[4].r, cJ);
addMoonCloud(planets[5].x, planets[5].r, cS);
addMoonCloud(planets[6].x, planets[6].r, cU);
addMoonCloud(planets[7].x, planets[7].r, cN);
addMoonCloud(planets[2].x, planets[2].r, Math.min(cI, 20));
scene.add(moonGroup);

// η n‑Bands
const bandsGroup = new THREE.Group();
[0.429,0.456,0.487].forEach((eta)=>{
  const y = (eta - 0.45) * 400;
  bandsGroup.add(bandPlane(y, 0xffcf5a));
});
scene.add(bandsGroup);

// Rails
const railsGroup = new THREE.Group();
[Math.SQRT2, Math.sqrt(5), Math.sqrt(17)].forEach((r)=>{
  const x = r * 20;
  railsGroup.add(railPlane(x, 0xb388ff));
});
scene.add(railsGroup);

// Oort
const oort = new THREE.Mesh(new THREE.SphereGeometry(100*AU, 48, 24), new THREE.MeshBasicMaterial({ color:0x9bd3ff, transparent:true, opacity:0.02, wireframe:true }));
scene.add(oort);

// Grid
const grid = new THREE.GridHelper(2000, 40, 0x335, 0x224); grid.position.y = -80; scene.add(grid);

// Toggles
function bindToggle(id, obj){ document.getElementById(id).addEventListener('change', e=> obj.visible = e.target.checked); }
bindToggle('chkA', beltGroup);
bindToggle('chkB', moonGroup);
bindToggle('chkC', cometGroup);
bindToggle('chkNB', bandsGroup);
bindToggle('chkRails', railsGroup);
bindToggle('chkOort', oort);

// Animate
(function animate(){
  requestAnimationFrame(animate);
  planetGroup.children.forEach((p, i)=>{ if (i>=4) p.rotation.y += 0.01; });
  controls.update();
  renderer.render(scene, camera);
})();

// Notes
/* SYMBOLIC MAP (Thomas Hofmann · NEXAH)
- A: Asteroid belts (blue).  B: moons around giants (red).  C: comets (green).
- η‑bands: 0.429 / 0.456 / 0.487 (gold).  Rails: √2 / √5 / √17 (magenta).
- Gate: 204² = 23³+24³+25³.  √432 ≈ 20.785.
This is a conceptual visualization; not an ephemeris.
*/
</script>
</body>
</html>
